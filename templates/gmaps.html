{% extends "base.html" %} {% block title %}LeadGen â€” Google Maps Scraper{%
endblock %} {% block topbar_title %}
<h5 class="mb-0 fw-bold">Google Maps</h5>
{% endblock %} {% block content %}

<!-- Search Form -->
<div class="tool-form-card">
  <div class="tool-header mb-3">
    <h2>
      <i class="bi bi-geo-alt-fill me-2" style="color: #4285f4"></i>Google Maps
      Lead Generator
    </h2>
    <p>
      Search Google Maps for businesses and export their contact info as CSV
    </p>
  </div>
  <form id="scrapeForm">
    <div class="tool-form-row">
      <div class="form-group">
        <label for="keyword" class="form-label"
          ><i class="bi bi-tag me-1"></i>Business Type / Keyword</label
        >
        <input
          type="text"
          class="form-control form-control-lg"
          id="keyword"
          placeholder="e.g. restaurants, dentists, plumbers"
          required
        />
      </div>
      <div class="form-group">
        <label for="place" class="form-label"
          ><i class="bi bi-pin-map me-1"></i>Location / Place</label
        >
        <input
          type="text"
          class="form-control form-control-lg"
          id="place"
          placeholder="e.g. New York, London, Mumbai"
          required
        />
      </div>
      <button
        type="submit"
        class="btn btn-primary btn-lg btn-go"
        id="btnScrape"
      >
        <i class="bi bi-rocket-takeoff me-1"></i>Go
      </button>
    </div>
  </form>
  <div class="tool-preview">
    <small
      >Search query: "<span id="previewQuery" class="fst-italic"
        >keyword in place</span
      >"</small
    >
  </div>
</div>

<!-- Progress Section -->
<div class="tool-progress-card" id="progressSection" style="display: none">
  <div
    class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2"
  >
    <h5 class="mb-0 fw-bold" style="font-size: 0.95rem">
      <span
        class="spinner-border spinner-border-sm me-2"
        style="color: #4285f4"
        id="progressSpinner"
      ></span>
      <span id="progressTitle">Scraping in progress...</span>
    </h5>
    <div class="d-flex align-items-center gap-3">
      <span
        class="badge px-3 py-2"
        id="elapsedTimer"
        style="
          background: var(--surface-2);
          font-family: monospace;
          font-size: 0.88rem;
        "
      >
        <i class="bi bi-clock me-1"></i>00:00:00
      </span>
      <button
        class="btn btn-outline-danger btn-sm"
        id="btnStop"
        title="Stop Scraping"
      >
        <i class="bi bi-stop-circle me-1"></i>Stop
      </button>
    </div>
  </div>
  <div class="progress mb-2">
    <div
      class="progress-bar progress-bar-striped progress-bar-animated"
      id="progressBar"
      role="progressbar"
      style="width: 0%"
    ></div>
  </div>
  <small class="text-muted" id="progressMessage">Starting...</small>
  <div class="d-flex gap-2 mt-3 flex-wrap" id="liveStats" style="display: none">
    <div class="live-stat-box">
      <div class="stat-val" style="color: #4285f4" id="statAreas">0 / 0</div>
      <div class="stat-label">Areas</div>
    </div>
    <div class="live-stat-box">
      <div class="stat-val" style="color: #22c55e" id="statLeads">0</div>
      <div class="stat-label">Leads</div>
    </div>
    <div class="live-stat-box">
      <div class="stat-val" style="color: #06b6d4" id="statWebsites">
        &mdash;
      </div>
      <div class="stat-label">Websites</div>
    </div>
  </div>
</div>

<!-- Results Section -->
<div id="resultsSection" style="display: none">
  <div class="tool-results-header">
    <h4 class="mb-0 fw-bold" style="font-size: 1.05rem">
      <i class="bi bi-table me-2"></i>Results
      <span class="badge bg-primary ms-2" id="resultCount">0</span>
    </h4>
    <div class="d-flex gap-2 flex-wrap">
      <input
        type="text"
        class="form-control form-control-sm"
        id="filterInput"
        placeholder="Filter results..."
        style="width: 200px"
      />
      <button class="btn btn-success btn-sm" id="btnDownload">
        <i class="bi bi-download me-1"></i>Download CSV
      </button>
    </div>
  </div>
  <div class="tool-results-card">
    <div class="table-responsive">
      <table class="table table-hover mb-0" id="resultsTable">
        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>Business Name</th>
            <th>Owner</th>
            <th>Phone</th>
            <th>Email</th>
            <th>Website</th>
            <th>Socials</th>
            <th>Address</th>
            <th>Rating</th>
            <th>Reviews</th>
            <th>Category</th>
          </tr>
        </thead>
        <tbody id="resultsBody"></tbody>
      </table>
    </div>
  </div>
</div>

<div id="errorSection" style="display: none">
  <div class="alert alert-danger d-flex align-items-center" role="alert">
    <i
      class="bi bi-exclamation-triangle-fill me-2"
      style="font-size: 1.2rem"
    ></i>
    <div id="errorMessage"></div>
  </div>
</div>

{% endblock %} {% block extra_js %}
<script src="{{ url_for('static', filename='js/app.js') }}"></script>
{% endblock %}
